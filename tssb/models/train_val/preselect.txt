RETAIN YEARS <YEAR_START> THROUGH <VAL_YEAR> ;
RETAIN MARKET LIST "..\..\ALL_SYMBOLS.TXT" ;
READ DATABASE "<DB_NAME>.DAT" "<DB_NAME>.FAM" ;

APPEND DATABASE "<TRADE_DB>" ;

REALPROFIT IS PROFIT ;

OUTLIER SCAN ;

MODEL FILTLONG1 IS <MODEL> [
   INPUT = [ <GROUP1> ]
   OUTPUT = REALPROFIT
   MAX STEPWISE = 0
   STEPWISE RETENTION = <RETENTION>
   CRITERION = <STAGE3_CRIT>
   MIN CRITERION FRACTION = <MIN_CRIT>
   SHOW SELECTION COUNT
] ;

MODEL FILTLONG2 IS <MODEL> [
   INPUT = [ <GROUP2> ]
   OUTPUT = REALPROFIT
   MAX STEPWISE = 0
   STEPWISE RETENTION = <RETENTION>
   CRITERION = <STAGE3_CRIT>
   MIN CRITERION FRACTION = <MIN_CRIT>
   SHOW SELECTION COUNT
] ;

MODEL FILTLONG3 IS <MODEL> [
   INPUT = [ <GROUP3> ]
   OUTPUT = REALPROFIT
   MAX STEPWISE = 0
   STEPWISE RETENTION = <RETENTION>
   CRITERION = <STAGE3_CRIT>
   MIN CRITERION FRACTION = <MIN_CRIT>
   SHOW SELECTION COUNT
] ;

MODEL FILTLONG4 IS <MODEL> [
   INPUT = [ <GROUP4> ]
   OUTPUT = REALPROFIT
   MAX STEPWISE = 0
   STEPWISE RETENTION = <RETENTION>
   CRITERION = <STAGE3_CRIT>
   MIN CRITERION FRACTION = <MIN_CRIT>
   SHOW SELECTION COUNT
] ;

MODEL FILTLONG5 IS <MODEL> [
   INPUT = [ <GROUP5> ]
   OUTPUT = REALPROFIT
   MAX STEPWISE = 0
   STEPWISE RETENTION = <RETENTION>
   CRITERION = <STAGE3_CRIT>
   MIN CRITERION FRACTION = <MIN_CRIT>
   SHOW SELECTION COUNT
] ;

WALK FORWARD BY year 10 <VAL_YEAR> ;
